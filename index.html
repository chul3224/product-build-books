<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Grimoire of Truth</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Crimson+Pro:ital,wght@0,400;0,700;1,400&family=Uncial+Antiqua&display=swap" rel="stylesheet">
    <style>
        :root {
            --book-bg: #2e0d0d;
            --parchment: #f2e8c9;
            --gold: #d4af37;
            --shadow: rgba(0, 0, 0, 0.8);
            
            /* PC 기준 기본 사이즈 */
            --book-w: 350px;
            --book-h: 500px;
            --open-x: 175px; /* 책 너비의 절반 */
        }

        /* 모바일 환경 (화면 너비 600px 이하) */
        @media (max-width: 600px) {
            :root {
                --book-w: 280px;
                --book-h: 400px;
                --open-x: 140px;
            }
            .parchment-text { font-size: 1.1rem !important; }
            #final-answer { font-size: 1.8rem !important; }
        }

        body, html {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            background-color: #050505;
            display: flex; justify-content: center; align-items: center;
            overflow: hidden;
            font-family: 'Crimson Pro', serif;
        }

        .magic-background {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, #1a0f2e 0%, #000 100%);
            z-index: -1;
        }

        .scene {
            perspective: 2500px;
            width: 100%; height: 100vh;
            display: flex; justify-content: center; align-items: center;
        }

        .book {
            width: var(--book-w);
            height: var(--book-h);
            position: relative;
            transform-style: preserve-3d;
            transition: transform 3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 30px 60px var(--shadow);
        }

        .book.open {
            /* 모바일에서도 화면 중앙을 유지하도록 변수를 사용해 이동 */
            transform: translateX(var(--open-x));
        }

        .cover, .page-right {
            position: absolute;
            width: 100%; height: 100%;
            top: 0; left: 0;
            border-radius: 5px 15px 15px 5px;
            transform-origin: left;
            transform-style: preserve-3d;
            transition: transform 3s;
        }

        .cover {
            z-index: 5;
            background: linear-gradient(135deg, #4a0e0e 0%, #2e0d0d 100%);
            border: 3px solid var(--gold);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            backface-visibility: hidden;
            cursor: pointer;
            box-sizing: border-box;
        }

        .cover-title {
            font-family: 'Uncial Antiqua', cursive;
            color: var(--gold);
            font-size: clamp(1.2rem, 5vw, 2rem); /* 폰트 크기 유동적 조절 */
            text-align: center; padding: 20px; text-shadow: 2px 2px 4px black;
        }

        .cover-inside {
            position: absolute; width: 100%; height: 100%;
            background: linear-gradient(to right, #e0d5b8, var(--parchment));
            transform: rotateY(180deg);
            backface-visibility: hidden;
            padding: 20px; box-sizing: border-box;
            border-radius: 15px 5px 5px 15px;
            display: flex; align-items: center; justify-content: center;
            border-right: 2px solid rgba(0,0,0,0.2);
        }

        .page-right {
            z-index: 1;
            background: linear-gradient(to left, #e0d5b8, var(--parchment));
            padding: 20px; box-sizing: border-box;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            box-shadow: inset 10px 0 30px rgba(0,0,0,0.3);
        }

        .parchment-text {
            font-size: 1.3rem; line-height: 1.5;
            color: #3d2b1f; text-align: center;
            font-style: italic; font-weight: 700;
            min-height: 80px; word-break: keep-all;
        }

        .next-btn {
            position: absolute; bottom: 20px; right: 20px;
            background: none; border: none;
            font-family: 'Cinzel', serif;
            color: #3d2b1f; font-size: 0.8rem;
            cursor: pointer; opacity: 0.6;
            display: none;
        }

        #final-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 100; display: none;
            justify-content: center; align-items: center;
            flex-direction: column;
            background: radial-gradient(circle, #1a0f2e 0%, #000 100%);
            padding: 20px; box-sizing: border-box;
        }

        #final-answer {
            font-family: 'Uncial Antiqua', cursive;
            font-size: 2.2rem; color: var(--gold);
            text-align: center; text-shadow: 0 0 20px var(--gold);
            line-height: 1.3; word-break: keep-all;
        }

        .retry-btn {
            margin-top: 40px; padding: 10px 25px;
            background: transparent; border: 1px solid var(--gold);
            color: var(--gold); font-family: 'Cinzel', serif;
            cursor: pointer;
        }

        @keyframes magicFlash {
            0% { background: white; opacity: 0; }
            50% { opacity: 1; }
            100% { background: transparent; opacity: 0; }
        }
        .flash {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 200; pointer-events: none;
        }
    </style>
</head>
<body>

<div class="magic-background"></div>
<div class="flash" id="flash"></div>

<div class="scene" id="main-scene">
    <div class="book" id="book" onclick="openBook()">
        <div class="cover" id="cover">
            <div class="cover-title">THE GRIMOIRE OF TRUTH</div>
            <div style="color:var(--gold); font-size:0.7rem; margin-top:10px;">[ Tap to Open ]</div>
            <div class="cover-inside">
                <p class="parchment-text">"해답은 이미 이 책의 갈피 속에 숨어 있습니다."</p>
            </div>
        </div>

        <div class="page-right">
            <div id="text-content" class="parchment-text"></div>
            <button class="next-btn" id="next-btn" onclick="nextStep(event)">Next ➔</button>
            <button id="magic-btn" class="retry-btn" style="display:none;" onclick="triggerMagic(event)">진실을 마주하라</button>
        </div>
    </div>
</div>

<div id="final-overlay">
    <div id="final-answer"></div>
    <button class="retry-btn" onclick="location.reload()">다시 질문하기</button>
</div>

<script>
    const answers = [
        "무조건 추진하세요.", "당신의 선택이 옳습니다.", "지금이 바로 최고의 기회입니다.", "망설임 없이 나아가도 좋습니다.", "결과는 기대보다 훨씬 긍정적일 것입니다.",
        "기꺼이 받아들이세요.", "우주가 당신의 편을 들어주고 있습니다.", "분명히 좋은 결실을 맺을 것입니다.", "자신감을 가지고 결정하세요.", "예외 없이 'YES'입니다.",
        "당신의 직감이 정확합니다.", "거침없이 도전해도 되는 시기입니다.", "행운이 따르는 결정입니다.", "의심할 여지가 없습니다.", "아주 현명한 선택입니다.",
        "빛나는 결과가 기다리고 있습니다.", "확신을 가져도 좋습니다.", "이보다 더 좋을 순 없습니다.", "순풍에 돛 단 듯 잘 풀릴 것입니다.", "당신의 능력을 믿고 진행하세요.",
        "모든 조건이 완벽하게 갖춰졌습니다.", "긍정적인 변화가 시작될 것입니다.", "지금 당장 시작해도 좋습니다.", "승리는 당신의 것입니다.", "망설임은 시간 낭비일 뿐입니다.",
        "최고의 타이밍입니다.", "기쁜 소식이 곧 들려올 것입니다.", "당신의 선택에 박수를 보냅니다.", "생각한 대로 이루어질 것입니다.", "믿음직한 결과를 보게 될 것입니다.",
        "조금 더 신중할 필요가 있습니다.", "지금은 때가 아닙니다. 잠시 기다리세요.", "한 걸음 물러나서 전체를 바라보세요.", "숨겨진 위험 요소가 있는지 확인하세요.", "다른 대안을 찾아보는 건 어떨까요?",
        "서두르면 소중한 것을 놓칠 수 있습니다.", "원점에서 다시 검토해 보길 권합니다.", "아직은 준비가 더 필요한 단계입니다.", "이번에는 양보하는 것이 지혜롭습니다.", "직관이 거부한다면 따르지 마세요.",
        "너무 큰 기대는 실망을 부를 수 있습니다.", "계획의 구멍을 먼저 찾아내세요.", "감정에 치우친 결정은 아닌가요?", "주변의 반대를 무시하지 마세요.", "한 번 더 고민해 보는 시간이 필요합니다.",
        "지금의 열정은 일시적일 수 있습니다.", "무리한 진행은 화를 부를 수 있습니다.", "고집을 버리고 유연하게 생각하세요.", "조금 더 정보를 수집한 뒤 결정하세요.", "리스크를 감당할 수 있는지 자문해 보세요.",
        "서두르지 않아도 기회는 다시 옵니다.", "당장의 이익보다 먼 미래를 보세요.", "침착하게 상황을 다시 분석하세요.", "반대 방향으로 생각해보면 답이 보입니다.", "지금은 침묵을 지키는 것이 이롭습니다.",
        "당신의 욕심이 눈을 가리고 있진 않나요?", "주변 환경이 아직 우호적이지 않습니다.", "작은 실수 하나가 큰 결과를 바꿉니다.", "일단은 보류하는 것이 상책입니다.", "철저한 계획 없이는 시작하지 마세요.",
        "이미 당신의 마음속에 답이 있습니다.", "제3자의 시선으로 문제를 바라보세요.", "시간이 해결해 줄 문제입니다. 서두르지 마세요.", "내일 아침, 맑은 정신으로 다시 생각하세요.", "감정을 가라앉히고 냉정하게 판단하세요.",
        "무엇이 가장 중요한지 우선순위를 정하세요.", "결과에 상관없이 후회하지 않을지 자문하세요.", "신뢰할 만한 사람의 조언을 구해 보세요.", "조금 더 기다려 보는 것도 훌륭한 전략입니다.", "모든 가능성을 열어두고 생각하세요.",
        "본질을 꿰뚫어 보는 통찰력이 필요합니다.", "당신이 진짜 원하는 것이 무엇인지 떠올리세요.", "과거의 경험에서 답을 찾아보세요.", "태로는 포기하는 것이 가장 큰 용기입니다.", "작은 것에 연연하지 말고 크게 보세요.",
        "순리에 맡기면 자연스럽게 풀립니다.", "타협이 필요한 시점일 수도 있습니다.", "스스로에게 정직해지면 답이 보입니다.", "당신의 가치관과 일치하는지 확인하세요.", "결과보다 과정에 집중해 보세요.",
        "마음의 평온을 찾은 뒤에 결정하세요.", "겉모습에 현혹되지 않도록 주의하세요.", "상식의 틀에서 벗어나 생각하세요.", "명분이 뚜렷하다면 밀고 나가세요.", "당신의 양심이 이끄는 대로 하세요.",
        "얻는 것이 있다면 잃는 것도 있습니다.", "균형을 잡는 것이 무엇보다 중요합니다.", "침묵 속에 가장 큰 힘이 있습니다.", "변화를 두려워하지 않는 마음이 열쇠입니다.", "우연을 가장한 필연을 믿어보세요.",
        "아주 작은 일부터 지금 바로 시작하세요.", "실패를 두려워하는 마음을 먼저 버리세요.", "당신의 열정만큼 강력한 에너지는 없습니다.", "계획을 구체화하는 것부터 착수하세요.", "새로운 도전을 즐길 준비를 하세요.",
        "이번 결정이 당신을 성장시킬 것입니다.", "실천 없는 생각은 잡념에 불과합니다.", "꾸준함이 모든 문제를 해결해 줄 것입니다.", "목표를 다시 한번 선명하게 그리세요.", "스스로 믿는 마음이 가장 큰 무기입니다.",
        "변화의 파도를 기꺼이 타세요.", "주저함은 행운을 멀어지게 합니다.", "행동하는 사람에게만 문이 열립니다.", "당신의 능력을 과소평가하지 마세요.", "어제보다 나은 오늘을 위해 결정하세요.",
        "용기 있는 자가 원하는 것을 얻습니다.", "지금의 노력이 내일의 자산이 됩니다.", "장애물은 뛰어넘으라고 있는 것입니다.", "한계를 설정하지 마세요.", "당신은 이미 준비가 되었습니다.",
        "시작이 반이라는 말을 기억하세요.", "스스로 길을 개척하는 사람이 되세요.", "긍정의 기운이 당신을 이끌 것입니다.", "두려움은 환상일 뿐입니다.", "행동으로 당신의 가치를 증명하세요.",
        "작은 성공들이 모여 큰 기적을 만듭니다.", "지금 이 순간에 최선을 다하세요.", "마음이 가는 곳에 길이 있습니다.", "끝까지 포기하지 않는다면 성공합니다.", "당신의 삶의 주인공은 당신입니다."
    ];

    let currentStep = 0;
    const phrases = ["고민이 무엇인가요?", "정답을 알려드립니다.", "마음속으로 고민을 담아주세요."];

    function openBook() {
        if (currentStep > 0) return;
        document.getElementById('book').classList.add('open');
        document.getElementById('cover').style.transform = 'rotateY(-180deg)';
        currentStep = 1;
        setTimeout(showText, 3000);
    }

    function showText() {
        const txt = document.getElementById('text-content');
        const nextBtn = document.getElementById('next-btn');
        const magicBtn = document.getElementById('magic-btn');
        txt.style.opacity = 0;
        setTimeout(() => {
            txt.innerText = phrases[currentStep - 1];
            txt.style.opacity = 1;
            if (currentStep < phrases.length) nextBtn.style.display = 'block';
            else { nextBtn.style.display = 'none'; magicBtn.style.display = 'block'; }
        }, 500);
    }

    function nextStep(e) { e.stopPropagation(); currentStep++; showText(); }

    function triggerMagic(e) {
        e.stopPropagation();
        document.getElementById('flash').style.animation = 'magicFlash 2s forwards';
        setTimeout(() => {
            document.getElementById('main-scene').style.display = 'none';
            document.getElementById('final-overlay').style.display = 'flex';
            const randomIndex = Math.floor(Math.random() * answers.length);
            document.getElementById('final-answer').innerText = answers[randomIndex];
        }, 2000);
    }
</script>
</body>
</html>